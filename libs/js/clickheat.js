function addEvtListener(a,b,c){document.addEventListener?a?a.addEventListener(b,c,!1):addEventListener(b,c,!1):attachEvent&&(a?a.attachEvent("on"+b,c):attachEvent("on"+b,c))}function showClickHeatDebug(a){clickHeatDebug===!0&&(document.getElementById("clickHeatDebuggerSpan").innerHTML=a,document.getElementById("clickHeatDebuggerDiv").style.display="block")}function catchClickHeat(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p=!1,q=!1;try{if(showClickHeatDebug("Gathering click data..."),0===clickHeatQuota)return showClickHeatDebug("Click not logged: quota reached"),!0;if(""===clickHeatGroup)return showClickHeatDebug("Click not logged: group name empty (clickHeatGroup)"),!0;if(a||(a=window.event),b=a.which||a.button,c=a.srcElement||null,0===b)return showClickHeatDebug("Click not logged: no button pressed"),!0;if(null!==c&&"iframe"===c.tagName.toLowerCase()){if(c.sourceIndex===clickHeatLastIframe)return showClickHeatDebug("Click not logged: same iframe (a click on iframe opens a popup and popup is closed => iframe gets the focus again)"),!0;clickHeatLastIframe=c.sourceIndex}else clickHeatLastIframe=-1;if(d=a.clientX,e=a.clientY,f=clickHeatDocument.clientWidth||window.innerWidth,g=clickHeatDocument.clientHeight||window.innerHeight,j=window.pageXOffset||clickHeatDocument.scrollLeft,k=window.pageYOffset||clickHeatDocument.scrollTop,h=Math.max(clickHeatDocument.scrollWidth,clickHeatDocument.offsetWidth,f),i=Math.max(clickHeatDocument.scrollHeight,clickHeatDocument.offsetHeight,g),d>f||e>g)return showClickHeatDebug("Click not logged: out of document (should be a click on scrollbars)"),!0;if(d+=j,e+=k,d<0||e<0||d>h||e>i)return showClickHeatDebug("Click not logged: out of document (should be a click out of the document's body)"),!0;if(l=new Date,l.getTime()-clickHeatTime<1e3)return showClickHeatDebug("Click not logged: at least 1 second between clicks"),!0;if(clickHeatTime=l.getTime(),clickHeatQuota>0&&(clickHeatQuota-=1),o="s="+clickHeatSite+"&g="+clickHeatGroup+"&x="+d+"&y="+e+"&w="+f+"&b="+clickHeatBrowser+"&c="+b+"&random="+Date(),clickHeatServer.indexOf("?")!==-1&&(o="&"+o),showClickHeatDebug("Ready to send click data..."),0!==clickHeatServer.indexOf("http")){try{q=new ActiveXObject("Msxml2.XMLHTTP")}catch(a){try{q=new ActiveXObject("Microsoft.XMLHTTP")}catch(a){q=null}}q||"undefined"==typeof XMLHttpRequest||(q=new XMLHttpRequest),q&&(clickHeatDebug===!0&&(q.onreadystatechange=function(){4===q.readyState&&(showClickHeatDebug(200===q.status?"Click recorded at "+clickHeatServer+" with the following parameters:<br/>x = "+d+" ("+(d-j)+"px from left + "+j+"px of horizontal scrolling, max width = "+h+")<br/>y = "+e+" ("+(e-k)+"px from top + "+k+"px of vertical scrolling, max height = "+i+")<br/>width = "+f+"<br/>browser = "+clickHeatBrowser+"<br/>click = "+b+"<br/>site = "+clickHeatSite+"<br/>group = "+clickHeatGroup+"<br/><br/>Server answer: "+q.responseText:404===q.status?"click.php was not found at: "+(""!==clickHeatServer?clickHeatServer:"/clickheat/click.php")+" please set clickHeatServer value":"click.php returned a status code "+q.status+" with the following error: "+q.responseText),clickHeatLocalWait=0)}),q.open("GET",clickHeatServer+o,!0),q.send(null),p=!0)}for(p===!1&&(clickHeatDebug===!0?showClickHeatDebug("Click recorded at "+clickHeatServer+" with the following parameters:<br/>x = "+(d+j)+" ("+d+"px from left + "+j+"px of horizontal scrolling)<br/>y = "+(e+k)+" ("+e+"px from top + "+k+"px of vertical scrolling)<br/>width = "+f+"<br/>browser = "+clickHeatBrowser+"<br/>click = "+b+"<br/>site = "+clickHeatSite+"<br/>group = "+clickHeatGroup+'<br/><br/>Server answer:<br/><iframe src="'+clickHeatServer+o+'" width="700" height="60"></iframe>'):(n=new Image,n.src=clickHeatServer+o)),m=new Date,clickHeatLocalWait=m.getTime()+clickHeatWait;clickHeatLocalWait>m.getTime();)m=new Date}catch(a){showClickHeatDebug("An error occurred while processing click (Javascript error): "+a.message)}return!0}function initClickHeat(){var a,b,c,d,e,f;if(clickHeatDebug===!0&&(f=document.createElement("div"),f.id="clickHeatDebuggerDiv",f.style.padding="5px",f.style.display="none",f.style.position="absolute",f.style.top="200px",f.style.left="200px",f.style.border="1px solid #888",f.style.backgroundColor="#eee",f.style.color="#a00",f.style.zIndex=99,f.innerHTML='<a href="#" onmouseover="document.getElementById(\'clickHeatDebuggerDiv\').style.display = \'none\'; return false" style="float:right">Rollover to close</a><strong>ClickHeat debug:</strong><br/><br/><span id="clickHeatDebuggerSpan"></span>',document.body.appendChild(f)),""===clickHeatGroup||""===clickHeatServer)return showClickHeatDebug("ClickHeat NOT initialised: either clickHeatGroup or clickHeatServer is empty"),!1;for(e=document.location.protocol+"//"+document.location.host,0===clickHeatServer.indexOf(e)&&(clickHeatServer=clickHeatServer.substring(e.length,clickHeatServer.length)),addEvtListener(document,"mousedown",catchClickHeat),b=document.getElementsByTagName("iframe"),a=0;a<b.length;a+=1)addEvtListener(b[a],"focus",catchClickHeat);for(clickHeatDocument=document.documentElement&&0!==document.documentElement.clientHeight?document.documentElement:document.body,c=navigator.userAgent?navigator.userAgent.toLowerCase().replace(/-/g,""):"",d=["chrome","firefox","safari","msie","opera"],clickHeatBrowser="unknown",a=0;a<d.length;a+=1)if(c.indexOf(d[a])!==-1){clickHeatBrowser=d[a];break}showClickHeatDebug("ClickHeat initialised with:<br/>site = "+clickHeatSite+"<br/>group = "+clickHeatGroup+"<br/>server = "+clickHeatServer+"<br/>quota = "+(clickHeatQuota===-1?"unlimited":clickHeatQuota)+"<br/>browser = "+clickHeatBrowser+"<br/><br/><strong>Click in a blank area (not on a link) to test ClickHeat</strong>")}var clickHeatGroup="",clickHeatSite="",clickHeatServer="",clickHeatLastIframe=-1,clickHeatTime=0,clickHeatQuota=-1,clickHeatBrowser="",clickHeatDocument="",clickHeatWait=500,clickHeatLocalWait=0,clickHeatDebug=document.location.href.indexOf("debugclickheat")!==-1;